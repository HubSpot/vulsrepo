(function(){var callWithJQuery;(callWithJQuery=function(pivotModule){return"object"==typeof exports&&"object"==typeof module?pivotModule(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],pivotModule):pivotModule(jQuery)})((function($){return $.pivotUtilities.export_renderers={"TSV Export":function(pivotData,opts){var agg,colAttrs,colKey,colKeys,defaults,i,j,k,l,len,len1,len2,len3,len4,len5,m,n,r,result,row,rowAttr,rowAttrs,rowKey,rowKeys,text;for(defaults={localeStrings:{}},opts=$.extend(!0,{},defaults,opts),0===(rowKeys=pivotData.getRowKeys()).length&&rowKeys.push([]),0===(colKeys=pivotData.getColKeys()).length&&colKeys.push([]),rowAttrs=pivotData.rowAttrs,colAttrs=pivotData.colAttrs,result=[],row=[],i=0,len=rowAttrs.length;i<len;i++)rowAttr=rowAttrs[i],row.push(rowAttr);if(1===colKeys.length&&0===colKeys[0].length)row.push(pivotData.aggregatorName);else for(j=0,len1=colKeys.length;j<len1;j++)colKey=colKeys[j],row.push(colKey.join("-"));for(result.push(row),k=0,len2=rowKeys.length;k<len2;k++){for(row=[],l=0,len3=(rowKey=rowKeys[k]).length;l<len3;l++)r=rowKey[l],row.push(r);for(m=0,len4=colKeys.length;m<len4;m++)colKey=colKeys[m],null!=(agg=pivotData.getAggregator(rowKey,colKey)).value()?row.push(agg.value()):row.push("");result.push(row)}for(text="",n=0,len5=result.length;n<len5;n++)text+=(r=result[n]).map((function(p){return"string"==typeof p?'"'+p.split('"').join('""')+'"':'"'+p+'"'})).join("\t")+"\n";return textarea=$("<textarea>").text(text).css({width:$(window).width()/2+"px",height:$(window).height()/2+"px"}),download=$("<button>").text("Download TSV").attr("id","download_tsv"),div=$("<div>"),div.append(textarea),div.append("</br>"),div.append(download),div}}}))}).call(this);